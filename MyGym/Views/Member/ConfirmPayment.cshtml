@model MyGym.Models.Member

@{
    ViewBag.Title = "Confirm Payment";
}

<script src="~/Scripts/jquery-1.11.1.js" type="text/javascript"></script>
<script src="~/Scripts/jquery-ui.min.js"></script>
<link href="~/Scripts/jquery-ui.min.css" rel="stylesheet" />

<link href="~/fonts/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
<script src="~/bootstrap/js/bootstrap.min.js"></script>
<link href="~/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/Site.css" rel="stylesheet" />

<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Ensures optimal rendering on mobile devices. -->
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> <!-- Optimal Internet Explorer compatibility -->

<script src="https://www.paypal.com/sdk/js?client-id=AZfXYUJZe5CefHebouYrFPmTRA2MOmpUxsKULYqLHlz4Bwt9Bl2wGw_UJj_SRTpm6UScuwhHBikY7vrt"></script>

<div class="container">
    <div class="clearfix"></div>
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>Register Member</legend>

            <div class="panel">
                <div class="panel-body" style="margin-left:20px">
                    <br />
                    <div style="margin-top: 5px"></div>

                    <div class="row" >
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.MemberFName)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.MemberFName, new { @class = "form-control", @readonly = "readonly" })
                        </div>
                        <div class="col-md-1"></div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.MemberLName)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.MemberLName, new { @class = "form-control", @readonly = "readonly" })
                        </div>
                    </div>
                    <div style="margin-top: 5px"></div>

                    <div class="row">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.MemberMName)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.MemberMName, new { @class = "form-control", @readonly = "readonly" })
                        </div>
                        <div class="col-md-1 col-sm-1"></div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.JoiningDate)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.JoiningDate, new { @class = "form-control date-picker", @readonly = "readonly" })
                        </div>
                    </div>
                    <div style="margin-top: 5px"></div>

                    <div class="row">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.DOB)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.DOB, new { @class = "form-control date-picker", @readonly = "readonly" })
                        </div>
                        <div class="col-md-1"></div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Age)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.Age, new { @class = "form-control", @readonly = "readonly" })
                        </div>
                    </div>
                    <div style="margin-top: 5px"></div>

                    <div class="row">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Gender)
                        </div>
                        <div class="col-md-3">
                            @Html.DropDownList("Gender",
                                         new List<SelectListItem>
                            {
                                             new SelectListItem {Text = "Male", Value = "1"},
                                             new SelectListItem {Text = "Female", Value = "2"}}, "Select Gender", new { @class = "form-control" ,@disabled="disabled"})
                        </div>
                        <div class="col-md-1 col-sm-1"></div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.EmailID)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.EmailID, new { @class = "form-control", @readonly = "readonly" })
                        </div>
                    </div>
                    <div style="margin-top: 5px"></div>


                    <div class="row">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.WorkouttypeID)
                        </div>
                        <div class="col-md-3">
                            @Html.DropDownListFor(model => model.WorkouttypeID, new SelectList(Model.ListScheme, "SchemeID", "SchemeName"), "Select Workout Type", new { @class = "form-control", @disabled = "disabled" })
                        </div>
                        <div class="col-md-1 col-sm-1"></div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.PlantypeID)
                        </div>
                        <div class="col-md-3">
                            @*@Html.DropDownListFor(model => model.PlantypeID, ViewBag.planlist as IEnumerable<SelectListItem>, "Select Plan Type", new { @class = "form-control", @disabled = "disabled" })*@
                            @Html.DropDownListFor(model => model.PlantypeID, new SelectList(Model.ListPlan, "PlanID", "PlanName"), "Select Workout Type", new { @class = "form-control", @disabled = "disabled" })
                        </div>
                    </div>
                    <div style="margin-top: 10px"></div>

                    <div class="row">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Contactno)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.Contactno, new { @class = "form-control", maxlength = "10", @readonly = "readonly" })
                        </div>
                        <div class="col-md-1 col-sm-1"></div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Address)
                        </div>
                        <div class="col-md-3">
                            @Html.TextAreaFor(model => model.Address, new { @class = "form-control", @readonly = "readonly" })
                        </div>
                    </div>
                    <div style="margin-top: 5px"></div>

                    <div class="row">
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.Amount)
                        </div>
                        <div class="col-md-3">
                            @Html.TextBoxFor(model => model.Amount, new { @class = "form-control", @readonly = "readonly" })
                        </div>
                        <div class="col-md-1 col-sm-1"></div>
                    </div>
                    <div style="margin-top: 40px"></div>
                    


                    <div class="row">
                        <div class="col-md-12" style="margin-left:8px">
                            <p>
                                <input type="submit" value="Pay Cash" style="width:35%; font-size:1.5em; min-height:45px" />
                                <div id="paypal-button-container" style=" width:35%; "></div>
                                @*<div id="paypal-button-container" style=" width:40%; margin:0 auto"></div>*@
                            </p>
                        </div>
                    </div>

                </div>
            </div>
        </fieldset>
    }
</div>



@section Scripts {
    <script>
            var amount = document.getElementById('Amount').value;
            //console.log(amount);

            paypal.Buttons({
        createOrder: function(data, actions) {
          return actions.order.create({
            purchase_units: [{
              amount: {
                  value: amount
                  //value:'0.01'
              }
            }]
          });
        },
        onApprove: function(data, actions) {
            return actions.order.capture().then(function (details) {
                //alert('Transaction completed by ' + details.payer.name.given_name);

                //console.log(details);
                var Id = details.payer.name.given_name + "_" + details.payer.name.surname + "_" + details.payer.payer_id;
                //window.location.href = "/Member/PaymentSucccess";
                //window.location.href = "/Member/PaymentSucccess?Page=data&Post=" + Id;
                window.location.href = '@Url.Action("PaymentSucccess", "Member", new { tran_Id = "x" })'.replace('x', Id);
          });
        }
      }).render('#paypal-button-container'); // Display payment options on your web page
    </script>
}


